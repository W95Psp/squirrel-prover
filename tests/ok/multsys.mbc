name ok : message
name ko : message
name koo : message

channel c

process A(res:message) =  if False then out(c,res)

system !_i A(diff(ok,ko)).

system [toto] !_i A(diff(ko,koo)).

equiv test.
Proof.
induction t.
expand exec@init; expand frame@init.

expand frame@A(i); expand exec@A(i); expand cond@A(i); expand output@A(i).
fa 0. fa 1. noif 2. simpl. assumption.

expand frame@A1(i); expand exec@A1(i); expand cond@A1(i); expand output@A1(i).
fa 0. fa 1.  fa 2. fa 2. assumption.
Qed.

equiv [left,toto] [right,toto] test.
Proof.
induction t.
expand exec@init; expand frame@init.

expand frame@A(i); expand exec@A(i); expand cond@A(i); expand output@A(i).
fa 0. fa 1. noif 2. simpl. assumption.

expand frame@A1(i); expand exec@A1(i); expand cond@A1(i); expand output@A1(i).
fa 0. fa 1.  fa 2. fa 2. assumption.
Qed.
