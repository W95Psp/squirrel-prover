hash h
channel c

name k : index -> message

name ok : message
name ko : message

system
!_i (if False then out(c,diff(ok,ko)) else out(c,h(ok,k(i)))).

equiv simp.
Proof.
enrich seq(i->h(ok,k(i))).

 induction t.

 expand frame@init.
 expand exec@init.

 expand frame@A(i).
 expand output@A(i).
 expand exec@A(i).
 fa 2.
 equivalent cond@A(i), False.
 simpl.
 expand cond@A(i).

 noif 3.
 simpl.
 assumption.

 expand frame@A1(i).
 expand output@A1(i).
 expand exec@A1(i).
 expand seq(i->h(ok,k(i))),i.
 expand cond@A1(i).
 assumption.
Qed.
